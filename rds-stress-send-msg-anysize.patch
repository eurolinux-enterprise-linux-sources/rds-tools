--- rds-tools-2.0.6/rds-stress.c	2010-11-02 00:37:01.000000000 -0400
+++ rds-tools-2.0.6/rds-stress.c.send-msg-anysize	2016-01-21 16:59:05.216319387 -0500
@@ -1400,7 +1400,7 @@ static int recv_message(int fd,
 		return ret;
 	if (ret && ret < sizeof(struct header))
 		die("recvmsg() returned short data: %zd", ret);
-	if (msg.msg_namelen < sizeof(struct sockaddr_in))
+	if (ret && (msg.msg_namelen < sizeof(struct sockaddr_in)))
 		die("socklen = %d < sizeof(sin) (%zu)\n",
 		    msg.msg_namelen, sizeof(struct sockaddr_in));
 
